// FingerprintJS 简化版本
// 这是一个简化的替代版本，提供基本的浏览器指纹功能
const FingerprintJS = {
    load: function() {
        return Promise.resolve({
            get: function() {
                return Promise.resolve(generateSimpleFingerprint());
            }
        });
    }
};

// 生成简单的浏览器指纹
function generateSimpleFingerprint() {
    const components = {
        userAgent: navigator.userAgent,
        language: navigator.language,
        platform: navigator.platform,
        screenResolution: `${window.screen.width}x${window.screen.height}`,
        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        sessionStorage: !!window.sessionStorage,
        localStorage: !!window.localStorage,
        indexedDb: !!window.indexedDB,
        cpuClass: navigator.cpuClass || 'unknown',
        hardwareConcurrency: navigator.hardwareConcurrency || 'unknown',
        deviceMemory: navigator.deviceMemory || 'unknown',
        plugins: Array.from(navigator.plugins || []).map(p => p.name).join(','),
        timestamp: new Date().getTime()
    };
    
    // 创建一个简单的哈希
    const str = JSON.stringify(components);
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
        const char = str.charCodeAt(i);
        hash = ((hash << 5) - hash) + char;
        hash = hash & hash; // 转换为32位整数
    }
    
    return {
        visitorId: Math.abs(hash).toString(16).padStart(8, '0') + Date.now().toString(16).slice(-8),
        confidence: { score: 0.8 },
        components: components
    };
} 